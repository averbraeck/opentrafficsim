<?xml version="1.0" encoding="UTF-8"?>
<NETWORK xmlns="http://www.opentrafficsim.org/ots" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opentrafficsim.org/ots http://www.opentrafficsim.org/docs/ots-network.xsd">

  <DEFINITIONS>

    <GLOBAL DEFAULTLANEWIDTH="3.6m" DEFAULTMAXSPEED="100km/h" DEFAULTLANEKEEPING="KEEPRIGHT" 
      DEFAULTOVERTAKING="LEFTSET([CAR, TRUCK] OVERTAKE [ALL]) RIGHTSPEED(40 km/h)"/>

    <GTU NAME="BICYCLE" GTUTYPE="BICYCLE" FOLLOWING="IDM" LENGTH="CONST(2) m" WIDTH="CONST(0.5) m" LANECHANGE="ALTRUISTIC"
      MAXSPEED="CONST(25) km/h" />
    <GTU NAME="CAR" GTUTYPE="CAR" FOLLOWING="IDM+" LENGTH="UNIF(4,8) m" WIDTH="UNIF(1.7, 2) m" LANECHANGE="EGOISTIC"
      MAXSPEED="TRIA(10,80,120) km/h" />
    <GTU NAME="TRUCK" GTUTYPE="TRUCK" FOLLOWING="IDM+" LENGTH="UNIF(16,24) m" WIDTH="UNIF(2.2, 2.7) m" LANECHANGE="ALTRUISTIC"
      MAXSPEED="CONST(100) km/h" />

    <GTUMIX NAME="C60T40">
      <GTU NAME="CAR" WEIGHT="60"></GTU>
      <GTU NAME="TRUCK" WEIGHT="40"></GTU>
    </GTUMIX>

    <GTUMIX NAME="C80T20">
      <GTU NAME="CAR" WEIGHT="80" />
      <GTU NAME="TRUCK" WEIGHT="20" />
    </GTUMIX>

    <LANETYPE NAME="HIGHWAY" />
    <LANETYPE NAME="NOTRUCK" />
    <LANETYPE NAME="BICYCLEPATH" />

    <COMPATIBILITY LANETYPE="HIGHWAY" GTULIST="CAR TRUCK" />
    <COMPATIBILITY LANETYPE="NOTRUCK" GTULIST="CAR" />
    <COMPATIBILITY LANETYPE="BICYCLEPATH" GTULIST="BICYCLE" />

    <ROADTYPE NAME="r1">
      <SHOULDER WIDTH="2m" OFFSET="-7.1m" COLOR="GREEN" />
      <STRIPE TYPE="SOLID" OFFSET="-6.1m" />
      <NOTRAFFICLANE OFFSET="-4.85m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="-3.6m" />
      <LANE NAME="A1" TYPE="HIGHWAY" OFFSET="-1.8m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="SOLID" OFFSET="0.0m" WIDTH="20cm" COLOR="#FFFFFF" />
      <NOTRAFFICLANE OFFSET="1.25m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="2.5m" />
      <SHOULDER WIDTH="2m" OFFSET="3.5m" COLOR="GREEN" />
    </ROADTYPE>

    <ROADTYPE NAME="r2">
      <SHOULDER WIDTH="2m" OFFSET="-3.5m" COLOR="GREEN" />
      <STRIPE TYPE="SOLID" OFFSET="-2.5m" />
      <NOTRAFFICLANE OFFSET="-1.25m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="0.0m" />
      <LANE NAME="A1" TYPE="HIGHWAY" OFFSET="1.8m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="DASHED" OFFSET="3.6m" COLOR="RGB(255,255,255)" />
      <LANE NAME="A2" TYPE="HIGHWAY" OFFSET="5.4m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="SOLID" OFFSET="7.2m" COLOR="RGB(255,255,255)" />
      <NOTRAFFICLANE OFFSET="8.45m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="9.7m" />
      <SHOULDER WIDTH="2m" OFFSET="10.7m" COLOR="GREEN" />
    </ROADTYPE>

    <ROADTYPE NAME="r3">
      <SHOULDER WIDTH="2m" OFFSET="-7.1m" COLOR="GREEN" />
      <STRIPE TYPE="SOLID" OFFSET="-6.1m" />
      <NOTRAFFICLANE OFFSET="-4.85m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="-3.6m" />
      <LANE NAME="A1" TYPE="HIGHWAY" OFFSET="-1.8m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="DASHED" OFFSET="0m" COLOR="RGB(255,255,255)" />
      <LANE NAME="A2" TYPE="HIGHWAY" OFFSET="1.8m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="DASHED" OFFSET="3.6m" COLOR="RGB(255,255,255)" />
      <LANE NAME="A3" TYPE="HIGHWAY" OFFSET="5.4m" WIDTH="3.6m" DIRECTION="FORWARD" SPEED="100km/h" />
      <STRIPE TYPE="SOLID" OFFSET="7.2m" WIDTH="20cm" COLOR="#FFFFFF" />
      <NOTRAFFICLANE OFFSET="8.45m" WIDTH="2.5m" />
      <STRIPE TYPE="SOLID" OFFSET="9.7m" />
      <SHOULDER WIDTH="2m" OFFSET="10.7m" COLOR="GREEN" />
    </ROADTYPE>

  </DEFINITIONS>

  <NODE NAME="N1" COORDINATE="(0.0, 0.0)" ANGLE="90 deg" />
  <NODE NAME="N1a" />
  <NODE NAME="N2" />
  <NODE NAME="NE" />
  <NODE NAME="NE2" />

  <ROUTE NAME="CIRCLE" NODELIST="NE N1 N1a N2 N1" />

  <LINK NAME="L1" NODESTART="N1" NODEEND="N1a" ROADTYPE="r3" LANEKEEPING="KEEPLANE">
    <ARC RADIUS="1000m" ANGLE="45 deg" DIRECTION="L" />
    <!-- TRAFFICLIGHT LANE="A2" POSITION="END-10cm" CLASS="org.opentrafficsim.road.gtu.lane.object.LaneBlockOnOff" />
    <TRAFFICLIGHT LANE="A3" POSITION="END-10cm" CLASS="org.opentrafficsim.road.gtu.lane.object.LaneBlockOnOff" / -->
    <!-- BLOCK LANE="A1" POSITION="END-10cm" / -->
  </LINK>

  <LINK NAME="L1a" NODESTART="N1a" NODEEND="N2" ROADTYPE="r2">
    <ARC RADIUS="1000m" ANGLE="135 deg" DIRECTION="L" />
  </LINK>

  <LINK NAME="L2" NODESTART="N2" NODEEND="N1" ROADTYPE="r2">
    <ARC RADIUS="1000m" ANGLE="180 deg" DIRECTION="L" />
    <!-- LANEOVERRIDE LANE="A1" OVERTAKING="LEFTONLY" />
    <LANEOVERRIDE LANE="A2" OVERTAKING="LEFTALWAYS RIGHTSPEED(40 km/h)" / -->
  </LINK>

  <LINK NAME="ENTRY" NODESTART="NE" NODEEND="N1" ROADTYPE="r1">
    <STRAIGHT LENGTH="200m" />
  </LINK>

  <LINK NAME="ENTRY2" NODESTART="NE2" NODEEND="NE" ROADTYPE="r1">
    <STRAIGHT LENGTH="200m" />
    <LANEOVERRIDE LANE="A1" SPEED="50 km/h" OVERTAKING="NONE" COLOR="ORANGE"/>
    <GENERATOR LANE="A1" POSITION="50m" IAT="CONST(5.0) s" INITIALSPEED="CONST(0.0) km/h" MAXGTU="100" GTU="CAR"
      ROUTE="CIRCLE" GTUCOLORER="SWITCHABLE" />
  </LINK>

</NETWORK>
