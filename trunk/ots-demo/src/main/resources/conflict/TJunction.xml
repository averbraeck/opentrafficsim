<?xml version="1.0" encoding="UTF-8" ?>
<OTS xmlns="http://www.opentrafficsim.org/ots" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opentrafficsim.org/ots https://opentrafficsim.org/docs/xsd/1.02.01/ots.xsd"
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <DEFINITIONS>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_gtutypes.xml" />
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_linktypes.xml" />
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_lanetypes.xml" />

    <GTUTEMPLATES>
      <GTUTEMPLATE DEFAULT="true" GTUTYPE="CAR" ID="CAR">
        <LENGTHDIST LENGTHUNIT="m">
          <UNIFORM MIN="3.0" MAX="4.0" />
        </LENGTHDIST>
        <WIDTHDIST LENGTHUNIT="m">
          <UNIFORM MIN="1.7" MAX="2.0" />
        </WIDTHDIST>
        <MAXSPEEDDIST SPEEDUNIT="km/h">
          <CONSTANT C="120" />
        </MAXSPEEDDIST>
      </GTUTEMPLATE>
    </GTUTEMPLATES>

    <LINKTYPES>
      <LINKTYPE ID="URBAN">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
        <SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="50km/h" />
      </LINKTYPE>
    </LINKTYPES>

    <LANETYPES>
      <LANETYPE ID="URBAN">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
      </LANETYPE>
    </LANETYPES>

    <ROADLAYOUTS>
      <ROADLAYOUT ID="RIGHT" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-8.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>-6.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSET>-3.25m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="RIGHT2" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-8.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>-6.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>-4.25m</CENTEROFFSET>
        </STRIPE>
        <LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>-2.5m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSET>0.25m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="RIGHT2TAPER" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-8.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>-6.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>-4.25m</CENTEROFFSET>
        </STRIPE>
        <LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSETSTART>-6.0m</CENTEROFFSETSTART>
          <CENTEROFFSETEND>-2.5m</CENTEROFFSETEND>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSETSTART>-3.25m</CENTEROFFSETSTART>
          <CENTEROFFSETEND>0.25m</CENTEROFFSETEND>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>
    </ROADLAYOUTS>
  </DEFINITIONS>

  <NETWORK>
    <NODE ID="E" COORDINATE="(300,0)" />
    <NODE ID="S" COORDINATE="(0,-300)" />
    <NODE ID="W" COORDINATE="(-300,0)" />
    <NODE ID="EC" COORDINATE="(18.8,0)" DIRECTION="180 deg" />
    <NODE ID="E2" COORDINATE="(20,0)" />
    <NODE ID="E3" COORDINATE="(100,0)" />
    <NODE ID="SC" COORDINATE="(0,-18.8)" DIRECTION="270 deg" />
    <NODE ID="WC" COORDINATE="(-18.8,0)" />


    <LINK ID="EE3" NODESTART="E" NODEEND="E3" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="E3E2" NODESTART="E3" NODEEND="E2" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT2TAPER</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="E2EC" NODESTART="E2" NODEEND="EC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT2</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECE" NODESTART="EC" NODEEND="E" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SSC" NODESTART="S" NODEEND="SC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCS" NODESTART="SC" NODEEND="S" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WWC" NODESTART="W" NODEEND="WC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCW" NODESTART="WC" NODEEND="W" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECWC" NODESTART="EC" NODEEND="WC" TYPE="URBAN" PRIORITY="PRIORITY">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECSC" NODESTART="EC" NODEEND="SC" TYPE="URBAN" OFFSETSTART="3.5m" OFFSETEND="0m" PRIORITY="PRIORITY">
      <BEZIER NUMSEGMENTS="128" ENDDIRECTION="270 deg"/>
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCEC" NODESTART="SC" NODEEND="EC" TYPE="URBAN">
      <ARC RADIUS="18.8m" DIRECTION="R" />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCWC" NODESTART="SC" NODEEND="WC" TYPE="URBAN">
      <ARC RADIUS="18.8m" DIRECTION="L" />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCEC" NODESTART="WC" NODEEND="EC" TYPE="URBAN" PRIORITY="PRIORITY">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCSC" NODESTART="WC" NODEEND="SC" TYPE="URBAN" PRIORITY="PRIORITY">
      <ARC RADIUS="18.8m" DIRECTION="R" />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

  </NETWORK>


  <NETWORKDEMAND>
    <SHORTESTROUTE ID="EW" GTUTYPE="CAR">
      <FROM NODE="E" />
      <TO NODE="W" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="WE" GTUTYPE="CAR">
      <FROM NODE="W" />
      <TO NODE="E" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="WS" GTUTYPE="CAR">
      <FROM NODE="W" />
      <TO NODE="S" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="SW" GTUTYPE="CAR">
      <FROM NODE="S" />
      <TO NODE="W" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="ES" GTUTYPE="CAR">
      <FROM NODE="E" />
      <TO NODE="S" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="SE" GTUTYPE="CAR">
      <FROM NODE="S" />
      <TO NODE="E" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTEMIX ID="E" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.4" ID="EW" />
      <SHORTESTROUTE WEIGHT="0.6" ID="ES" />
    </SHORTESTROUTEMIX>

    <SHORTESTROUTEMIX ID="W" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.8" ID="WE" />
      <SHORTESTROUTE WEIGHT="0.2" ID="WS" />
    </SHORTESTROUTEMIX>

    <SHORTESTROUTEMIX ID="S" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.5" ID="SW" />
      <SHORTESTROUTE WEIGHT="0.5" ID="SE" />
    </SHORTESTROUTEMIX>

    <GENERATOR LINK="EE3" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>E</SHORTESTROUTEMIX>
      <FREQUENCY>15/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>
    <GENERATOR LINK="SSC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>S</SHORTESTROUTEMIX>
      <FREQUENCY>6/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>
    <GENERATOR LINK="WWC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>W</SHORTESTROUTEMIX>
      <FREQUENCY>6/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>

    <SINK LINK="ECE" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
    <SINK LINK="SCS" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
    <SINK LINK="WCW" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
  </NETWORKDEMAND>

  <SCENARIO></SCENARIO>

  <RUN>
    <RUNLENGTH>1h</RUNLENGTH>
    <RANDOMSTREAMS>
      <RANDOMSTREAM ID="default">
        <REPLICATION ID="1" SEED="1" />
      </RANDOMSTREAM>
      <RANDOMSTREAM ID="generation">
        <REPLICATION ID="1" SEED="1" />
      </RANDOMSTREAM>
    </RANDOMSTREAMS>
  </RUN>

  <ANIMATION>
    <DEFAULTS>
      <SHOULDER COLOR="RGB(0,128,0)" />
    </DEFAULTS>
  </ANIMATION>

</OTS>