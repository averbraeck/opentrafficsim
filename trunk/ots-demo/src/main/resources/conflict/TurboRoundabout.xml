<?xml version="1.0" encoding="UTF-8"?>

<NETWORK xmlns="http://www.opentrafficsim.org/ots" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opentrafficsim.org/ots http://www.opentrafficsim.org/docs/current/ots-network.xsd">

  <DEFINITIONS>

    <GLOBAL />

    <GTUTYPE NAME="CAR" />

    <GTU NAME="CAR" GTUTYPE="CAR" LENGTH="UNIF(3, 4) m" WIDTH="UNIF(1.7, 2) m" MAXSPEED="CONST(120) km/h" />

    <ROADTYPE NAME="URBAN" DEFAULTLANEWIDTH="3.5m" DEFAULTLANEKEEPING="KEEPRIGHT" DEFAULTOVERTAKING="NONE">
      <SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="50km/h" />
    </ROADTYPE>

    <ROADLAYOUT NAME="2LANELC" ROADTYPE="URBAN">
      <SHOULDER WIDTH="3m" OFFSET="-5.0m" COLOR="RGB(0,128,0)" />
      <STRIPE TYPE="SOLID" OFFSET="-3.5m" />
      <LANE NAME="RIGHT" OFFSET="-1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="DASHED" OFFSET="0.0m" />
      <LANE NAME="LEFT" OFFSET="1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="3.5m" />
      <SHOULDER WIDTH="3m" OFFSET="5.0m" COLOR="RGB(0,128,0)" />
    </ROADLAYOUT>

    <ROADLAYOUT NAME="3LANELC" ROADTYPE="URBAN">
      <SHOULDER WIDTH="3m" OFFSET="-5.0m" COLOR="RGB(0,128,0)" />
      <STRIPE TYPE="SOLID" OFFSET="-3.5m" />
      <LANE NAME="RIGHT" OFFSET="-1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="DASHED" OFFSET="0.0m" />
      <LANE NAME="LEFT" OFFSET="1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="3.5m" />
      <SHOULDER WIDTH="3m" OFFSET="5.0m" COLOR="RGB(0,128,0)" />
    </ROADLAYOUT>

    <ROADLAYOUT NAME="2LANE" ROADTYPE="URBAN">
      <SHOULDER WIDTH="3m" OFFSET="-5.0m" COLOR="RGB(0,128,0)" />
      <STRIPE TYPE="SOLID" OFFSET="-3.5m" />
      <LANE NAME="RIGHT" OFFSET="-1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="0.0m" />
      <LANE NAME="LEFT" OFFSET="1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="3.5m" />
      <SHOULDER WIDTH="3m" OFFSET="5.0m" COLOR="RGB(0,128,0)" />
    </ROADLAYOUT>

    <ROADLAYOUT NAME="1LEFT" ROADTYPE="URBAN">
      <SHOULDER WIDTH="3m" OFFSET="-5.0m" COLOR="RGB(0,128,0)" />
      <STRIPE TYPE="SOLID" OFFSET="-3.5m" />
      <LANE NAME="LANE" OFFSET="-1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="0.0m" />
      <SHOULDER WIDTH="3m" OFFSET="1.5m" COLOR="RGB(0,128,0)" />
    </ROADLAYOUT>

    <ROADLAYOUT NAME="1RIGHT" ROADTYPE="URBAN">
      <SHOULDER WIDTH="3m" OFFSET="-1.5m" COLOR="RGB(0,128,0)" />
      <STRIPE TYPE="SOLID" OFFSET="0.0m" />
      <LANE NAME="LANE" OFFSET="1.75m" WIDTH="3.5m" DIRECTION="FORWARD" />
      <STRIPE TYPE="SOLID" OFFSET="3.5m" />
      <SHOULDER WIDTH="3m" OFFSET="5.0m" COLOR="RGB(0,128,0)" />
    </ROADLAYOUT>

  </DEFINITIONS>

  <ROUTE NODELIST="E EP EENTER EA EB NEXIT NP N" NAME="EN" />
  <ROUTE NODELIST="E EP EENTER EA EB NA NB WEXIT W" NAME="EW" />
  <ROUTE NODELIST="E EP EENTER EA EB NA NB WA WB SEXIT S" NAME="ES" />

  <ROUTE NODELIST="N NENTER NA NB WEXIT W" NAME="NW" />
  <ROUTE NODELIST="N NENTER NA NB WA WB SEXIT S" NAME="NS" />
  <ROUTE NODELIST="N NENTER NA NB WA WB SA SB EEXIT E" NAME="NE" />

  <ROUTE NODELIST="W WP WENTER WA WB SEXIT S" NAME="WS" />
  <ROUTE NODELIST="W WP WENTER WA WB SA SB EEXIT E" NAME="WE" />
  <ROUTE NODELIST="W WP WENTER WA WB SA SB EA EB NEXIT NP N" NAME="WN" />

  <ROUTE NODELIST="S SENTER SA SB EEXIT E" NAME="SE" />
  <ROUTE NODELIST="S SENTER SA SB EA EB NEXIT NP N" NAME="SN" />
  <ROUTE NODELIST="S SENTER SA SB EA EB NA NB WEXIT W" NAME="SW" />

  <ROUTEMIX NAME="E">
    <ROUTE WEIGHT="0.40" NAME="EN" />
    <ROUTE WEIGHT="0.20" NAME="EW" />
    <ROUTE WEIGHT="0.40" NAME="ES" />
  </ROUTEMIX>

  <ROUTEMIX NAME="N">
    <ROUTE WEIGHT="0.25" NAME="NW" />
    <ROUTE WEIGHT="0.50" NAME="NS" />
    <ROUTE WEIGHT="0.25" NAME="NE" />
  </ROUTEMIX>

  <ROUTEMIX NAME="W">
    <ROUTE WEIGHT="0.4" NAME="WS" />
    <ROUTE WEIGHT="0.2" NAME="WE" />
    <ROUTE WEIGHT="0.4" NAME="WN" />
  </ROUTEMIX>

  <ROUTEMIX NAME="S">
    <ROUTE WEIGHT="0.25" NAME="SE" />
    <ROUTE WEIGHT="0.50" NAME="SN" />
    <ROUTE WEIGHT="0.25" NAME="SW" />
  </ROUTEMIX>

  <NODE NAME="E" COORDINATE="(300,0)" />
  <NODE NAME="N" COORDINATE="(0,300)" />
  <NODE NAME="W" COORDINATE="(-300,0)" />
  <NODE NAME="S" COORDINATE="(0,-300)" />
  <NODE NAME="EP" COORDINATE="(100,0)" />
  <NODE NAME="NP" COORDINATE="(0,100)" />
  <NODE NAME="WP" COORDINATE="(-100,0)" />

  <LINK NAME="EEP" NODESTART="E" NODEEND="EP" ROADLAYOUT="1RIGHT" OFFSETSTART="-5.25m" OFFSETEND="-5.25m">
    <STRAIGHT />
    <GENERATOR LANE="LANE" POSITION="10m" IAT="EXPO(2.4) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="E"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
  </LINK>
  <LINK NAME="EPEENTER" NODESTART="EP" NODEEND="EENTER" ROADLAYOUT="2LANELC" OFFSETSTART="-5.25m">
    <STRAIGHT />
  </LINK>
  <LINK NAME="EEXITE" NODESTART="EEXIT" NODEEND="E" ROADLAYOUT="1LEFT" OFFSETEND="1.75m">
    <STRAIGHT />
    <SINK POSITION="END-20m" LANE="LANE" />
  </LINK>

  <LINK NAME="NNENTER" NODESTART="N" NODEEND="NENTER" ROADLAYOUT="2LANELC" OFFSETSTART="-5.25m">
    <STRAIGHT />
    <GENERATOR LANE="LEFT" POSITION="10m" IAT="EXPO(4.8) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="N"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
    <GENERATOR LANE="RIGHT" POSITION="10m" IAT="EXPO(4.8) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="N"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
  </LINK>
  <LINK NAME="NEXITNP" NODESTART="NEXIT" NODEEND="NP" ROADLAYOUT="2LANELC" OFFSETEND="-5.25m">
    <STRAIGHT />
  </LINK>
  <LINK NAME="NPN" NODESTART="NP" NODEEND="N" ROADLAYOUT="1RIGHT" OFFSETSTART="-5.25m" OFFSETEND="5.25m">
    <STRAIGHT />
    <SINK POSITION="END-20m" LANE="LANE" />
  </LINK>

  <LINK NAME="WWP" NODESTART="W" NODEEND="WP" ROADLAYOUT="1RIGHT" OFFSETSTART="5.25m" OFFSETEND="-5.25m">
    <STRAIGHT />
    <GENERATOR LANE="LANE" POSITION="10m" IAT="EXPO(2.4) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="W"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
    <BLOCK LANE="LANE" POSITION="75m" />
  </LINK>
  <LINK NAME="WPWENTER" NODESTART="WP" NODEEND="WENTER" ROADLAYOUT="2LANELC" OFFSETSTART="-5.25m">
    <STRAIGHT />
  </LINK>
  <LINK NAME="WEXITW" NODESTART="WEXIT" NODEEND="W" ROADLAYOUT="1LEFT" OFFSETEND="-1.75m">
    <STRAIGHT />
    <SINK POSITION="END-20m" LANE="LANE" />
  </LINK>

  <LINK NAME="SSENTER" NODESTART="S" NODEEND="SENTER" ROADLAYOUT="2LANELC" OFFSETSTART="5.25m">
    <STRAIGHT />
    <GENERATOR LANE="LEFT" POSITION="10m" IAT="EXPO(4.8) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="S"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
    <GENERATOR LANE="RIGHT" POSITION="10m" IAT="EXPO(4.8) s" INITIALSPEED="CONST(50.0) km/h" GTU="CAR" ROUTEMIX="S"
      GTUCOLORER="SWITCHABLE" TACTICALPLANNER="LMRS" />
  </LINK>
  <LINK NAME="SEXITS" NODESTART="SEXIT" NODEEND="S" ROADLAYOUT="2LANELC" OFFSETEND="-5.25m">
    <STRAIGHT />
    <SINK POSITION="END-20m" LANE="LEFT" />
    <SINK POSITION="END-20m" LANE="RIGHT" />
  </LINK>



  <!-- Roundabout itself, generated code -->
  <NODE NAME="EENTER" COORDINATE="(44.0000,5.2500)" ANGLE="180.0000 deg" />
  <NODE NAME="EEXIT" COORDINATE="(44.0000,-1.7500)" ANGLE="360.0000 deg" />
  <NODE NAME="EA" COORDINATE="(15.9460,12.0808)" ANGLE="122.9377 deg" />
  <NODE NAME="EB" COORDINATE="(10.3308,17.6960)" ANGLE="147.0623 deg" />
  <LINK NAME="EENTEREA" NODESTART="EENTER" NODEEND="EA" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <LINK NAME="EAEB" NODESTART="EA" NODEEND="EB" ROADLAYOUT="2LANE">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="EBNA" NODESTART="EB" NODEEND="NA" ROADLAYOUT="1RIGHT" OFFSETEND="-3.5m" PRIORITY="PRIORITY">
    <BEZIER SHAPE="0.75" />
  </LINK>
  <LINK NAME="EBNEXIT" NODESTART="EB" NODEEND="NEXIT" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <NODE NAME="NENTER" COORDINATE="(-5.2500,44.0000)" ANGLE="270.0000 deg" />
  <NODE NAME="NEXIT" COORDINATE="(5.2500,44.0000)" ANGLE="90.0000 deg" />
  <NODE NAME="NA" COORDINATE="(-10.3308,14.1960)" ANGLE="212.9377 deg" />
  <NODE NAME="NB" COORDINATE="(-15.9460,8.5808)" ANGLE="237.0623 deg" />
  <LINK NAME="NENTERNA" NODESTART="NENTER" NODEEND="NA" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <LINK NAME="NANB" NODESTART="NA" NODEEND="NB" ROADLAYOUT="2LANE">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="NBWA" NODESTART="NB" NODEEND="WA" ROADLAYOUT="2LANE" PRIORITY="PRIORITY">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="NBWEXIT" NODESTART="NB" NODEEND="WEXIT" ROADLAYOUT="1LEFT">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <NODE NAME="WENTER" COORDINATE="(-44.0000,-5.2500)" ANGLE="0.0000 deg" />
  <NODE NAME="WEXIT" COORDINATE="(-44.0000,1.7500)" ANGLE="180.0000 deg" />
  <NODE NAME="WA" COORDINATE="(-15.9460,-12.0808)" ANGLE="302.9377 deg" />
  <NODE NAME="WB" COORDINATE="(-10.3308,-17.6960)" ANGLE="327.0623 deg" />
  <LINK NAME="WENTERWA" NODESTART="WENTER" NODEEND="WA" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <LINK NAME="WAWB" NODESTART="WA" NODEEND="WB" ROADLAYOUT="2LANE">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="WBSA" NODESTART="WB" NODEEND="SA" ROADLAYOUT="1RIGHT" OFFSETEND="-3.5m" PRIORITY="PRIORITY">
    <BEZIER SHAPE="0.75" />
  </LINK>
  <LINK NAME="WBSEXIT" NODESTART="WB" NODEEND="SEXIT" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <NODE NAME="SENTER" COORDINATE="(5.2500,-44.0000)" ANGLE="90.0000 deg" />
  <NODE NAME="SEXIT" COORDINATE="(-5.2500,-44.0000)" ANGLE="270.0000 deg" />
  <NODE NAME="SA" COORDINATE="(10.3308,-14.1960)" ANGLE="392.9377 deg" />
  <NODE NAME="SB" COORDINATE="(15.9460,-8.5808)" ANGLE="417.0623 deg" />
  <LINK NAME="SENTERSA" NODESTART="SENTER" NODEEND="SA" ROADLAYOUT="2LANE">
    <BEZIER SHAPE="2.00" />
  </LINK>
  <LINK NAME="SASB" NODESTART="SA" NODEEND="SB" ROADLAYOUT="2LANE">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="SBEA" NODESTART="SB" NODEEND="EA" ROADLAYOUT="2LANE" PRIORITY="PRIORITY">
    <ARC RADIUS="19.0000 m" DIRECTION="L" />
  </LINK>
  <LINK NAME="SBEEXIT" NODESTART="SB" NODEEND="EEXIT" ROADLAYOUT="1LEFT">
    <BEZIER SHAPE="2.00" />
  </LINK>

</NETWORK>
    