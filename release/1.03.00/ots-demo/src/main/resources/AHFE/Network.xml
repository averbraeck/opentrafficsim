<?xml version="1.0" encoding="UTF-8" ?>
<OTS xmlns="http://www.opentrafficsim.org/ots" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opentrafficsim.org/ots https://opentrafficsim.org/docs/xsd/1.03.00/ots.xsd"
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <DEFINITIONS>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.03.00/defaults/default_gtutypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.03.00/defaults/default_gtutypes.xml" />
      </xi:fallback>
    </xi:include>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.03.00/defaults/default_linktypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.03.00/defaults/default_linktypes.xml" />
      </xi:fallback>
    </xi:include>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.03.00/defaults/default_lanetypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.03.00/defaults/default_lanetypes.xml" />
      </xi:fallback>
    </xi:include>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.03.00/defaults/default_gtutemplates.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.03.00/defaults/default_gtutemplates.xml" />
      </xi:fallback>
    </xi:include>

    <LINKTYPES>
      <LINKTYPE ID="HIGHWAY">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
        <SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="120km/h" />
        <SPEEDLIMIT GTUTYPE="TRUCK" LEGALSPEEDLIMIT="90km/h" />
      </LINKTYPE>
      <LINKTYPE ID="STREET">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
        <SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="50km/h" />
        <SPEEDLIMIT GTUTYPE="TRUCK" LEGALSPEEDLIMIT="50km/h" />
      </LINKTYPE>
    </LINKTYPES>

    <LANETYPES>
      <LANETYPE ID="NOTRUCK">
        <COMPATIBILITY GTUTYPE="CAR" DIRECTION="FORWARD" />
      </LANETYPE>
    </LANETYPES>

    <ROADLAYOUTS>
      <ROADLAYOUT ID="2LaneHighway" LINKTYPE="HIGHWAY">
        <SHOULDER>
          <CENTEROFFSET>8.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>7.2m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD1" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>5.4m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>3.6m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD2" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>1.8m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>0m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <SHOULDER>
          <CENTEROFFSET>-1.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="2LaneHighwayNoLc" LINKTYPE="HIGHWAY">
        <SHOULDER>
          <CENTEROFFSET>8.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>7.2m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD1" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>5.4m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>3.6m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD2" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>1.8m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>0m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <SHOULDER>
          <CENTEROFFSET>-1.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="3LaneHighway" LINKTYPE="HIGHWAY">
        <SHOULDER>
          <CENTEROFFSET>12.1m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>10.8m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD1" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>9.0m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>7.2m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD2" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>5.4m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>3.6m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD3" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>1.8m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>0m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <SHOULDER>
          <CENTEROFFSET>-1.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="4LaneHighway" LINKTYPE="HIGHWAY">
        <SHOULDER>
          <CENTEROFFSET>15.7m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>14.4m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD1" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>12.6m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>10.8m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD2" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>9.0m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>7.2m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD3" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>5.4m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>3.6m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <LANE ID="FORWARD4" DESIGNDIRECTION="true" LANETYPE="HIGHWAY">
          <CENTEROFFSET>1.8m</CENTEROFFSET>
          <WIDTH>3.6m</WIDTH>
        </LANE>
        <STRIPE TYPE="SOLID">
          <CENTEROFFSET>0m</CENTEROFFSET>
          <DRAWINGWIDTH>20cm</DRAWINGWIDTH>
        </STRIPE>
        <SHOULDER>
          <CENTEROFFSET>-1.5m</CENTEROFFSET>
          <WIDTH>3m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

    </ROADLAYOUTS>
  </DEFINITIONS>

  <NETWORK>
    <NODE ID="LEFTINPRE" COORDINATE="(0,50)" DIRECTION="0 deg" />
    <NODE ID="LEFTIN" COORDINATE="(100,50)" DIRECTION="0 deg" />
    <NODE ID="RIGHTINPRE" COORDINATE="(0,0)" DIRECTION="0 deg" />
    <NODE ID="RIGHTIN" COORDINATE="(100,0)" DIRECTION="0 deg" />
    <NODE ID="STARTCONVERGE" COORDINATE="(5000,50)" DIRECTION="0 deg" />
    <NODE ID="STARTWEAVING" COORDINATE="(6000,0)" DIRECTION="0 deg" />
    <NODE ID="NARROWING" COORDINATE="(7000,0)" DIRECTION="0 deg" />
    <NODE ID="EXIT" COORDINATE="(9000,0)" DIRECTION="0 deg" />

    <LINK ID="LEFTINPRE" NODESTART="LEFTINPRE" NODEEND="LEFTIN" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>2LaneHighwayNoLc</DEFINEDLAYOUT>
      <!--
      <GENERATOR LANE="FORWARD1" POSITION="10m" IAT="EXPO(20) s" INITIALSPEED="CONST(0.0) km/h" GTU="CAR" ROUTE="LEFTEND" GTUCOLORER="SWITCHABLE" /> 
      <GENERATOR LANE="FORWARD2" POSITION="10m" IAT="EXPO(10) s" INITIALSPEED="CONST(0.0) km/h" GTU="CAR" ROUTE="LEFTEND" GTUCOLORER="SWITCHABLE" /> 
      -->
    </LINK>

    <LINK ID="LEFTIN" NODESTART="LEFTIN" NODEEND="STARTCONVERGE" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>2LaneHighway</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="CONVERGE" NODESTART="STARTCONVERGE" NODEEND="STARTWEAVING" OFFSETEND="7.2m" TYPE="HIGHWAY">
      <BEZIER />
      <DEFINEDLAYOUT>2LaneHighway</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="RIGHTINPRE" NODESTART="RIGHTINPRE" NODEEND="RIGHTIN" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>2LaneHighwayNoLc</DEFINEDLAYOUT>
      <!--
      <GENERATOR LANE="FORWARD1" POSITION="10m" IAT="EXPO(20) s" INITIALSPEED="CONST(0.0) km/h" GTU="CAR" ROUTE="RIGHTEND" GTUCOLORER="SWITCHABLE" /> 
      <GENERATOR LANE="FORWARD2" POSITION="10m" IAT="EXPO(10) s" INITIALSPEED="CONST(0.0) km/h" GTU="CAR" ROUTE="RIGHTEND" GTUCOLORER="SWITCHABLE" />
      -->
    </LINK>

    <LINK ID="RIGHTIN" NODESTART="RIGHTIN" NODEEND="STARTWEAVING" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>2LaneHighway</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WEAVING" NODESTART="STARTWEAVING" NODEEND="NARROWING" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>4LaneHighway</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="END" NODESTART="NARROWING" NODEEND="EXIT" TYPE="HIGHWAY">
      <STRAIGHT />
      <DEFINEDLAYOUT>3LaneHighway</DEFINEDLAYOUT>
    </LINK>
    
    <!--
    ROUTE NAME="LEFTEND" NODELIST="LEFTIN STARTCONVERGE NARROWING EXIT" /> 
    <ROUTE NAME="RIGHTEND" NODELIST="RIGHTIN NARROWING EXIT" /> 
    -->

  </NETWORK>

  <NETWORKDEMAND>
    <SINK LINK="END" LANE="FORWARD1" DIRECTION="DIR_PLUS" POSITION="1950m" />
    <SINK LINK="END" LANE="FORWARD2" DIRECTION="DIR_PLUS" POSITION="1950m" />
    <SINK LINK="END" LANE="FORWARD3" DIRECTION="DIR_PLUS" POSITION="1950m" />
  </NETWORKDEMAND>

  <SCENARIO></SCENARIO>

  <RUN>
    <RUNLENGTH>1h</RUNLENGTH>
  </RUN>
</OTS>