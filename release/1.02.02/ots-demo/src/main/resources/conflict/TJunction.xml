<?xml version="1.0" encoding="UTF-8" ?>
<OTS xmlns="http://www.opentrafficsim.org/ots" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opentrafficsim.org/ots https://opentrafficsim.org/docs/xsd/1.02.01/ots.xsd"
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <DEFINITIONS>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_gtutypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.02.01/defaults/default_gtutypes.xml" />
      </xi:fallback>
    </xi:include>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_linktypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.02.01/defaults/default_linktypes.xml" />
      </xi:fallback>
    </xi:include>
    <xi:include href="https://opentrafficsim.org/docs/xsd/1.02.01/defaults/default_lanetypes.xml">
      <xi:fallback>
        <xi:include href="../xsd/1.02.01/defaults/default_lanetypes.xml" />
      </xi:fallback>
    </xi:include>

    <GTUTEMPLATES>
      <GTUTEMPLATE DEFAULT="true" GTUTYPE="CAR" ID="CAR">
        <LENGTHDIST LENGTHUNIT="m">
          <UNIFORM MIN="3.0" MAX="4.0" />
        </LENGTHDIST>
        <WIDTHDIST LENGTHUNIT="m">
          <UNIFORM MIN="1.7" MAX="2.0" />
        </WIDTHDIST>
        <MAXSPEEDDIST SPEEDUNIT="km/h">
          <CONSTANT C="120" />
        </MAXSPEEDDIST>
      </GTUTEMPLATE>
    </GTUTEMPLATES>

    <LINKTYPES>
      <LINKTYPE ID="URBAN">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
        <SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="50km/h" />
      </LINKTYPE>
    </LINKTYPES>

    <LANETYPES>
      <LANETYPE ID="URBAN">
        <COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
      </LANETYPE>
    </LANETYPES>

    <ROADLAYOUTS>
      <ROADLAYOUT ID="RIGHT" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-2.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>0.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSET>2.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="RIGHT2" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-2.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>0.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>2.75m</CENTEROFFSET>
        </STRIPE>
        <LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>3.5m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSET>6.25m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>

      <ROADLAYOUT ID="RIGHT2TAPER" LINKTYPE="URBAN">
        <SHOULDER>
          <CENTEROFFSET>-2.75m</CENTEROFFSET>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
        <LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSET>0.0m</CENTEROFFSET>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <STRIPE TYPE="DASHED">
          <CENTEROFFSET>2.25m</CENTEROFFSET>
        </STRIPE>
        <LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
          <CENTEROFFSETSTART>0.0m</CENTEROFFSETSTART>
          <CENTEROFFSETEND>3.5m</CENTEROFFSETEND>
          <WIDTH>3.5m</WIDTH>
        </LANE>
        <SHOULDER>
          <CENTEROFFSETSTART>2.75m</CENTEROFFSETSTART>
          <CENTEROFFSETEND>6.25m</CENTEROFFSETEND>
          <WIDTH>2m</WIDTH>
        </SHOULDER>
      </ROADLAYOUT>
    </ROADLAYOUTS>
  </DEFINITIONS>

  <NETWORK>
    <NODE ID="BLE" COORDINATE="(300,0)" DIRECTION="0 deg"/>
    <NODE ID="BLS" COORDINATE="(0,-300)" DIRECTION="270 deg"/>
    <NODE ID="BLW" COORDINATE="(-300,0)" DIRECTION="0 deg"/>
    <NODE ID="BLEC" COORDINATE="(28.8,0)" DIRECTION="0 deg" />
    <NODE ID="BLSC" COORDINATE="(0,-18.8)" DIRECTION="270 deg" />
    <NODE ID="BLWC" COORDINATE="(-18.8,0)" DIRECTION="0 deg"/>

    <NODE ID="TRE" COORDINATE="(300,15)" DIRECTION="180 deg"/>
    <NODE ID="TRS" COORDINATE="(15,-300)" DIRECTION="90 deg"/>
    <NODE ID="TRW" COORDINATE="(-300,15)" DIRECTION="180 deg"/>
    <NODE ID="TREC" COORDINATE="(18.8,15)" DIRECTION="180 deg" />
    <NODE ID="TRE2" COORDINATE="(20,15)" DIRECTION="180 deg"/>
    <NODE ID="TRE3" COORDINATE="(100,15)" DIRECTION="180 deg"/>
    <NODE ID="TRSC" COORDINATE="(15,-18.8)" DIRECTION="90 deg" />
    <NODE ID="TRWC" COORDINATE="(-18.8,15)" DIRECTION="180 deg"/>

    <LINK ID="WWC" NODESTART="BLW" NODEEND="BLWC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCEC" NODESTART="BLWC" NODEEND="BLEC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECE" NODESTART="BLEC" NODEEND="BLE" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCS" NODESTART="BLSC" NODEEND="BLS" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCSC" NODESTART="BLWC" NODEEND="BLSC" TYPE="URBAN">
      <BEZIER />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="EE3" NODESTART="TRE" NODEEND="TRE3" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="E3E2" NODESTART="TRE3" NODEEND="TRE2" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT2TAPER</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="E2EC" NODESTART="TRE2" NODEEND="TREC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT2</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECWC" NODESTART="TREC" NODEEND="TRWC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="WCW" NODESTART="TRWC" NODEEND="TRW" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SSC" NODESTART="TRS" NODEEND="TRSC" TYPE="URBAN">
      <STRAIGHT />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCEC" NODESTART="TRSC" NODEEND="BLEC" TYPE="URBAN">
      <BEZIER />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="SCWC" NODESTART="TRSC" NODEEND="TRWC" TYPE="URBAN">
      <BEZIER />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

    <LINK ID="ECSC" NODESTART="TREC" NODEEND="BLSC" TYPE="URBAN" OFFSETSTART="3.5m" OFFSETEND="0m" >
      <BEZIER />
      <DEFINEDLAYOUT>RIGHT</DEFINEDLAYOUT>
    </LINK>

  </NETWORK>


  <NETWORKDEMAND>

    <SHORTESTROUTE ID="EW" GTUTYPE="CAR">
      <FROM NODE="TRE" />
      <TO NODE="TRW" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="WE" GTUTYPE="CAR">
      <FROM NODE="BLW" />
      <TO NODE="BLE" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="WS" GTUTYPE="CAR">
      <FROM NODE="BLW" />
      <TO NODE="BLS" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="SW" GTUTYPE="CAR">
      <FROM NODE="TRS" />
      <TO NODE="TRW" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="ES" GTUTYPE="CAR">
      <FROM NODE="TRE" />
      <TO NODE="BLS" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTE ID="SE" GTUTYPE="CAR">
      <FROM NODE="TRS" />
      <TO NODE="BLE" />
      <DISTANCECOST>1/m</DISTANCECOST>
    </SHORTESTROUTE>

    <SHORTESTROUTEMIX ID="E" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.4" ID="EW" />
      <SHORTESTROUTE WEIGHT="0.6" ID="ES" />
    </SHORTESTROUTEMIX>

    <SHORTESTROUTEMIX ID="W" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.8" ID="WE" />
      <SHORTESTROUTE WEIGHT="0.2" ID="WS" />
    </SHORTESTROUTEMIX>

    <SHORTESTROUTEMIX ID="S" GTUTYPE="CAR">
      <SHORTESTROUTE WEIGHT="0.5" ID="SW" />
      <SHORTESTROUTE WEIGHT="0.5" ID="SE" />
    </SHORTESTROUTEMIX>

    <GENERATOR LINK="EE3" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>E</SHORTESTROUTEMIX>
      <FREQUENCY>15/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>
    <GENERATOR LINK="SSC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>S</SHORTESTROUTEMIX>
      <FREQUENCY>6/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>
    <GENERATOR LINK="WWC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
      <GTUTEMPLATE>CAR</GTUTEMPLATE>
      <SHORTESTROUTEMIX>W</SHORTESTROUTEMIX>
      <FREQUENCY>6/min</FREQUENCY>
      <ROOMCHECKER>CF</ROOMCHECKER>
    </GENERATOR>

    <SINK LINK="ECE" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
    <SINK LINK="SCS" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
    <SINK LINK="WCW" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />

  </NETWORKDEMAND>

  <SCENARIO></SCENARIO>

  <RUN>
    <RUNLENGTH>1h</RUNLENGTH>
    <RANDOMSTREAMS>
      <RANDOMSTREAM ID="default">
        <REPLICATION ID="1" SEED="1" />
      </RANDOMSTREAM>
      <RANDOMSTREAM ID="generation">
        <REPLICATION ID="1" SEED="1" />
      </RANDOMSTREAM>
    </RANDOMSTREAMS>
  </RUN>

  <ANIMATION>
    <DEFAULTS>
      <SHOULDER COLOR="RGB(0,128,0)" />
    </DEFAULTS>
  </ANIMATION>

</OTS>