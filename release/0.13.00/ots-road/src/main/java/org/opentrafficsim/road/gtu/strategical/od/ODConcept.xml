<?xml version="1.0" encoding="UTF-8"?>
<ROOT>

  <!-- All fields required -->
  <!-- TYPE either "DEMAND" or "TRIPS", use ODMatrix or ODMatrixTrips respectively -->
  <!-- GLOBALINTERPOLATION either "STEPWISE" or "LINEAR" -->
  <ODMATRIX NAME="RandstadMaandagOchtend" TYPE="DEMAND" GLOBALINTERPOLATION="STEPWISE">

    <!-- Required, at least 1, nodes should be in network -->
    <ORIGINS NODELIST="A B C D" />

    <!-- Required, at least 1, nodes should be in network -->
    <DESTINATIONS NODELIST="A B D E" />

    <!-- Optional, if no CATEGORIZATION defined, use Categorization.UNCATEGORIZED -->
    <CATEGORIZATION NAME="BYGTU">

      <!-- Required (if CATEGORIZATION defined), at least 1 -->
      <CATEGORIZATIONITEM CLASS="org.opentrafficsim.core.gtu.GTUType" />

    </CATEGORIZATION>

    <!-- Optional (just use empty TimeVector in constructor of ODMatrix if not specified) -->
    <GLOBALTIME>
      <!-- At least 2 -->
      <!-- With a set of time units -->
      <TIME VALUE="0s" />
      <TIME VALUE="900s" />
      <TIME VALUE="1h" />
    </GLOBALTIME>

    <CATEGORY NAME="CAR">
      <!-- Not sure what to do here, the parser should create instances of classes -->
      <!-- These instances may also be used elsewhere in the XML, e.g. GTUType("Car") or a Route -->
      <!-- Objects within categories can be anything, with all sorts of input into the constructor -->
      <!-- We should probably use factories and/or a CategoryType<T> for this -->
    </CATEGORY>
    <CATEGORY NAME="TRUCK" />

    <!-- ================================================ -->
    <!-- ==================== DEMAND ==================== -->
    <!-- ================================================ -->

    <!-- Nodes required, should be part of ODMatrix -->
    <!-- CATEGORY should be defined in XML (but what if that is by a factory...?) -->
    <!-- CATEGORY required if CATEGORIZATION was defined, otherwise forbidden and use Category.UNCATEGORIZED -->

    <!-- Demand is defined either in flow, or in trips -->
    <!-- One can deviate from global time/interpolation, or not -->
    <!-- This gives 4 combinations of required (or forbidden) input, of which examples are below -->

    <!-- Demand in "veh/h" or "veh/s", adhere to global time and interpolation -->
    <DEMAND ORIGIN="A" DESTINATION="B" CATEGORY="CAR">
      <!-- Specifying TIME forbidden if no INTERPOLATION is specified -->
      <LEVEL VALUE="0.5veh/s" />
      <LEVEL VALUE="1500veh/h" />
      <LEVEL VALUE="0veh/h" />
      <!-- Same length as GLOBALTIME -->
    </DEMAND>

    <!-- Demand in "veh/h" or "veh/s", overrule global time and interpolation -->
    <!-- INTERPOLATION either "STEPWISE" or "LINEAR" -->
    <DEMAND ORIGIN="A" DESTINATION="E" CATEGORY="CAR" INTERPOLATION="LINEAR">
      <!-- LEVELs should be in "veh/h" or "veh/s" -->
      <!-- DEMAND may also be used if ODMATRIX.TYPE="TRIPS" -->
      <!-- ODMatrix.putDemandVector() has two versions (one with time and interpolation, and one without) -->
      <!-- TIME required if INTERPOLATION is specified -->
      <LEVEL TIME="0s" VALUE="0.5veh/s" /> 
      <LEVEL TIME="3600s" VALUE="1500veh/h" />
    </DEMAND>

    <!-- Demand in "veh", adhere to global time -->
    <!-- TRIPS can only be used if ODMATRIX.TYPE="TRIPS" -->
    <!-- There is no interpolation property for TRIPS -->
    <!-- pce (passenger car equivalent) is also often used, but the OD classes do not support it yet -->
    <TRIPS ORIGIN="A" DESTINATION="B" CATEGORY="TRUCK">
      <!-- LEVELs should be in "veh" -->
      <!-- ODMatrixTrips.putTripsVector() should be used, which has two versions (with or without time specified) -->
      <NUMBER VALUE="300veh" />
      <NUMBER VALUE="700veh" />
      <!-- One less value than the global time vector, 3 time instances makes 2 periods -->
    </TRIPS>

    <!-- Demand in "veh", overrule global time -->
    <TRIPS ORIGIN="A" DESTINATION="E" CATEGORY="TRUCK">
      <NUMBER TIME="0s" VALUE="350veh" />
      <NUMBER TIME="1200s" VALUE="550veh" />
      <NUMBER TIME="1h" VALUE="0veh" />
      <!-- A final time of the last period is always required -->
    </TRIPS>

    <!-- It is not required to specify all Origin/Destination/Category combinations, what is not specified is assumed 0 by ODMatrix -->

  </ODMATRIX>
</ROOT>
